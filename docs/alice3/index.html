<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Alice&nbsp;3</title>
        <link href='https://fonts.googleapis.com/css?family=Sorts+Mill+Goudy:400,400italic' rel='stylesheet' type='text/css'>
        <link href="../base.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="content">
            <h1>Alice&nbsp;3</h1>

	    <p>In 1995, we built a Z80 computer, the
            <a href="../alice2/">Alice&nbsp;2</a>.
            We could download programs to it and display images in
            an NTSC bitmap.
            It didn't work very well.
            </p>

            <p>In 2015, Brad cleaned up his house and tried to power on
            the Alice&nbsp;2.  Although it powered on, we couldn't reliably
            run any programs on it.</p>

            <p>After trying to make it work again for a few months, we
            scrapped all the old hardware and decided to use modern chips
            and tools, with the goal of running CP/M 2.2 on a
            silicon Z80.</p>

            <p>The Alice&nbsp;3 uses a Propeller for VGA video and an ARM Cortex M4
            for SD card and PS/2 keyboard. The Propeller takes individual
            ASCII bytes from the CPU and writes them to the VGA screen,
            pretending to be a VT-100 terminal. Reverse video is also
            supported. As a bonus, the ARM can use the same mechanism to
            write to the screen, which has been useful when debugging I/O
            problems.</p>

            <p>Our first version was on three breadboards. It was pretty flaky,
            working sometimes and then not working two minutes later after we had
            brushed up against some wires. We got it working intermittently but
            decided that we wouldn't make any more progress with stability until
            we moved to a PCB.</p>

            <p><img src="breadboard.jpg"></p>

            <p>Our second version used through-hole components on a PCB, with
            off-the-shelf daughter boards for the ARM, VGA connector, and SD
            card connector. We accidentally forgot to connect a bunch of ground
            and power sections (thanks to a terrible user interface in KiCAD).
            That was painful to fix by hand, but it then worked on the first
            try.</p>

            <p><img src="through-hole.jpg"></p>

            <p>Our third and final version used surface-mount components, getting
            rid of all daughter boards. When we started to assemble it we realized
            that we had ordered the wrong SRAM part from Digi-Key. This turned out
            to be fine, though, since the ARM, at 168 MHz, is more than fast
            enough to monitor the 2 MHz Z80's address and data bus and
            simulate 64 KB of memory.</p>

            <p><img src="smd.jpg"></p>

            <p>The computer boots to a CP/M prompt, where the SD card provides several
            megabytes of original software. You can run WordStar, Turbo Pascal,
            MBASIC, and
            <a href="https://en.wikipedia.org/wiki/Sargon_(chess)">Sargon Chess</a>.</p>

            <p><img src="boot.jpg"></p>

            <p><a href="https://github.com/lkesteloot/alice/tree/master/alice3">The GitHub repository</a> contains the ARM and Propeller firmware, Z80 boot ROM, Z80 CP/M BIOS, KiCAD project for the PCB, and an emulator.</p>

            <p>We produced the PCBs at OSHPark
            (<a href="https://oshpark.com/shared_projects/LIX6apPK">through-hole</a>,
            <a href="https://oshpark.com/shared_projects/3sLbkCbx">surface-mount</a>).
            Let us know if you want the BOM so you can build it yourself.</p>

            <p><a href="../">&laquo; Back</a></p>
        </div>
    </body>
</html>

